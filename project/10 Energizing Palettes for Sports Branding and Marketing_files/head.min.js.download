!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).AnalyticsWrapper=t()}(this,function(){"use strict";var j=function(e,t){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function V(e,t){function r(){this.constructor=e}j(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var g=function(){return(g=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function Q(e,t){var r={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(r[o[n]]=e[o[n]]);return r}function x(e,a,s,u){return new(s=s||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,o)}i((u=u.apply(e,a||[])).next())})}function q(n,o){var i,a,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,a=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!((s=0<(s=u.trys).length&&s[s.length-1])||6!==t[0]&&2!==t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){u.label=t[1];break}if(6===t[0]&&u.label<s[1]){u.label=s[1],s=t;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(t);break}s[2]&&u.ops.pop(),u.trys.pop();continue}t=o.call(n,u)}catch(e){t=[6,e],a=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}}function u(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)n[o]=i[a];return n}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e,t,r){return e(r={path:t,exports:{},require:function(e,t){throw null==t&&r.path,new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}},r.exports),r.exports}for(var M=[],r=0;r<256;++r)M[r]=(r+256).toString(16).substr(1);function G(e,t,r){var n=t&&r||0,o=("string"==typeof e&&(t="binary"===e?new Array(16):null,e=null),(e=e||{}).random||(e.rng||F)());if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var i=0;i<16;++i)t[n+i]=o[i];return t||W(o)}var o,W=function(e,t){var t=t||0,r=M;return[r[e[t++]],r[e[t++]],r[e[t++]],r[e[t++]],"-",r[e[t++]],r[e[t++]],"-",r[e[t++]],r[e[t++]],"-",r[e[t++]],r[e[t++]],"-",r[e[t++]],r[e[t++]],r[e[t++]],r[e[t++]],r[e[t++]],r[e[+t]]].join("")},F=t(function(e){var t,r,n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);n?(t=new Uint8Array(16),e.exports=function(){return n(t),t}):(r=new Array(16),e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r})}),H=((f=o=o||{})[f.Debug=0]="Debug",f[f.Info=1]="Info",f[f.Warn=2]="Warn",f[f.Error=3]="Error",null),B=!1;function n(e,t,r){if((B||r)&&window&&window.console){var n="Analytics Wrapper -> "+t;switch(e){case o.Info:console.info(n);break;case o.Warn:console.warn(n);break;case o.Error:console.error(n);break;default:console.debug(n)}}}function z(e,t,r,n,o){var s=this;void 0===n&&(n="/"),this.name=e,this.value=t,this.expires=r,this.path=n,this.domain=o,this.getUniqueCookieValue=function(){return s.cookie.value=G(),s.cookie.value},this.getCookieDomain=function(){var e=v.window.location.hostname.split("."),e=(e[0],e.slice(1).join("."));if(e.length)return"."+e},this.updateCookieExpiration=function(e){try{var t=new Date(Date.now()+e).toUTCString(),r=s.getCookie(""+s.cookie.name),n=s.cookie.domain||s.getCookieDomain(),o="domain="+n+";";return globalThis.document.cookie=s.cookie.name+"="+encodeURIComponent(r)+"; expires="+t+"; path="+s.cookie.path+"; "+(n?o:""),s.cookie.expires=t,!0}catch(e){return s.logger.warn(e,"graceful degradation of setCookie, error setting session_id flag, gracefully degrading to undefined"),!1}},this.setToStorage=function(e,t){try{return v.localStorage.setItem(e,t)}catch(t){return s.logger.warn(t,"graceful degradation of setStorage(localStorage), error setting "+e+" flag, gracefully degrading to false"),!1}},this.getFromStorage=function(t){try{return v.localStorage.getItem(t)}catch(e){s.logger.warn(e,"graceful degradation of getStorage(localStorage), error getting "+t+" flag, gracefully degrading to undefined")}},this.getCookie=function(r){try{return void 0!==s.cookie.value?s.cookie.value:v.document.cookie.split("; ").reduce(function(e,t){t=t.split("=");return t[0]===r?decodeURIComponent(t[1]):e},"")}catch(e){s.logger.warn(e,"graceful degradation of getCookie, error getting "+r+" flag, gracefully degrading to undefined")}},this.setCookie=function(e,t,r){try{var n=encodeURIComponent(t),o=new Date(Date.now()+r).toUTCString(),i=s.getCookieDomain(),a="domain="+i+";";return v.document.cookie=e+"="+n+"; expires="+o+"; "+(i?a:""),s.cookie={name:e,value:t,domain:i},!0}catch(t){return s.logger.warn(t,"graceful degradation of setCookie, error setting "+e+" flag, gracefully degrading to undefined"),!1}},this.logger=i.getLogger(),this.cookie={name:e,value:t,expires:r,path:n,domain:o}}s.prototype.debug=function(e){n(o.Debug,e)},s.prototype.info=function(e){n(o.Info,e)},s.prototype.warn=function(e){n(o.Warn,e)},s.prototype.error=function(e,t){n(o.Error,e,t)},s.getLogger=function(e){return null!=e&&(B=e),H=H||new s(e)};var K,i=s,v=(new function(){var e=this;this.getGlobal=function(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:(e.logger.error("Couldn't define polyfill version for globalThis. Returning null."),null)},this.logger=new i(!1)}).getGlobal(),J=(V(a,K=z),Object.defineProperty(a.prototype,"anonID",{get:function(){return this.anonId},enumerable:!1,configurable:!0}),a.sstkCookieName="sstk_anonymous_id",a.ajsCookieName="ajs_anonymous_id",a.Expiration=31536e7,a);function a(){var r=K.call(this,a.sstkCookieName)||this;return r.getAnonFromCookie=function(){var e=!1,t=r.getCookie(a.sstkCookieName);return t||(e=!0,(t=r.getFromStorage(a.sstkCookieName))||(t=r.getCookie(a.ajsCookieName)||r.getUniqueCookieValue())),'"'===t.charAt(0)&&(t=t.slice(1,-1)),e&&(r.setCookie(a.sstkCookieName,t,a.Expiration),r.setToStorage(a.sstkCookieName,t)),t},r.anonId=r.getAnonFromCookie(),r}function s(e){B=e}function c(e,t){for(var r=e.length;r--;)if(l(e[r][0],t))return r;return-1}var l=function(e,t){return e===t||e!=e&&t!=t},$=Array.prototype.splice;function d(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}d.prototype.clear=function(){this.__data__=[],this.size=0},d.prototype.delete=function(e){var t=this.__data__,e=c(t,e);return!(e<0||(e==t.length-1?t.pop():$.call(t,e,1),--this.size,0))},d.prototype.get=function(e){var t=this.__data__,e=c(t,e);return e<0?void 0:t[e][1]},d.prototype.has=function(e){return-1<c(this.__data__,e)},d.prototype.set=function(e,t){var r=this.__data__,n=c(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};var p=d;function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":(ie&&ie in Object(e)?re:oe)(e)}function X(e,t){return t=t,e=null==(e=e)?void 0:e[t],!b(t=e)||ue(t)||!(ae(t)?pe:le).test(de(t))?void 0:e}var Z="object"==h(e)&&e&&e.Object===Object&&e,f="object"==("undefined"==typeof self?"undefined":h(self))&&self&&self.Object===Object&&self,y=Z||f||Function("return this")(),e=y.Symbol,f=Object.prototype,ee=f.hasOwnProperty,te=f.toString,m=e?e.toStringTag:void 0,re=function(e){var t=ee.call(e,m),r=e[m];try{var n=!(e[m]=void 0)}catch(e){}var o=te.call(e);return n&&(t?e[m]=r:delete e[m]),o},ne=Object.prototype.toString,oe=function(e){return ne.call(e)},ie=e?e.toStringTag:void 0,b=function(e){var t=h(e);return null!=e&&("object"==t||"function"==t)},ae=function(e){if(!b(e))return!1;e=Y(e);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},f=y["__core-js_shared__"],se=(e=/[^.]+$/.exec(f&&f.keys&&f.keys.IE_PROTO||""))?"Symbol(src)_1."+e:"",ue=function(e){return!!se&&se in e},ce=Function.prototype.toString,de=function(e){if(null!=e){try{return ce.call(e)}catch(e){}try{return e+""}catch(e){}}return""},le=/^\[object .+?Constructor\]$/,f=Function.prototype,e=Object.prototype,f=f.toString,e=e.hasOwnProperty,pe=RegExp("^"+f.call(e).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),he=X(y,"Map"),E=X(Object,"create"),fe=Object.prototype.hasOwnProperty,ge=Object.prototype.hasOwnProperty;function _(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}_.prototype.clear=function(){this.__data__=E?E(null):{},this.size=0},_.prototype.delete=function(e){e=this.has(e)&&delete this.__data__[e];return this.size-=e?1:0,e},_.prototype.get=function(e){var t,r=this.__data__;return E?"__lodash_hash_undefined__"===(t=r[e])?void 0:t:fe.call(r,e)?r[e]:void 0},_.prototype.has=function(e){var t=this.__data__;return E?void 0!==t[e]:ge.call(t,e)},_.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=E&&void 0===t?"__lodash_hash_undefined__":t,this};function ve(e,t){return e=e.__data__,me(t)?e["string"==typeof t?"string":"hash"]:e.map}var ye=_,me=function(e){var t=h(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};function C(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}C.prototype.clear=function(){this.size=0,this.__data__={hash:new ye,map:new(he||p),string:new ye}},C.prototype.delete=function(e){e=ve(this,e).delete(e);return this.size-=e?1:0,e},C.prototype.get=function(e){return ve(this,e).get(e)},C.prototype.has=function(e){return ve(this,e).has(e)},C.prototype.set=function(e,t){var r=ve(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};var Ee=C;function O(e){e=this.__data__=new p(e);this.size=e.size}O.prototype.clear=function(){this.__data__=new p,this.size=0},O.prototype.delete=function(e){var t=this.__data__,e=t.delete(e);return this.size=t.size,e},O.prototype.get=function(e){return this.__data__.get(e)},O.prototype.has=function(e){return this.__data__.has(e)},O.prototype.set=function(e,t){var r=this.__data__;if(r instanceof p){var n=r.__data__;if(!he||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Ee(n)}return r.set(e,t),this.size=r.size,this};var be=O,_e=function(){try{var e=X(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Ce=function(e,t,r){"__proto__"==t&&_e?_e(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r},Oe=function(e,t,r){(void 0===r||l(e[t],r))&&(void 0!==r||t in e)||Ce(e,t,r)},De=function(e,t,r){for(var n=-1,o=Object(e),i=r(e),a=i.length;a--;){var s=i[++n];if(!1===t(o[s],s,o))break}return e},Te=t(function(e,t){var t=t&&!t.nodeType&&t,r=t&&e&&!e.nodeType&&e,r=r&&r.exports===t?y.Buffer:void 0,n=r?r.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();t=e.length,t=n?n(t):new e.constructor(t);return e.copy(t),t}}),Ae=y.Uint8Array,Se=function(e,t){var r,t=t?(t=e.buffer,r=new t.constructor(t.byteLength),new Ae(r).set(new Ae(t)),r):e.buffer;return new e.constructor(t,e.byteOffset,e.length)},Ie=function(e,t){var r=-1,n=e.length;for(t=t||Array(n);++r<n;)t[r]=e[r];return t},we=Object.create,ke=function(e){if(!b(e))return{};if(we)return we(e);Re.prototype=e;e=new Re;return Re.prototype=void 0,e};function Re(){}function Ne(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ze)}function D(e){return null!=e&&"object"==h(e)}function Pe(e){return D(e)&&"[object Arguments]"==Y(e)}function Le(){return!1}function Ue(e,t,r,n){var o=!r;r=r||{};for(var i,a,s=-1,u=t.length;++s<u;){var c=t[s],d=n?n(r[c],e[c],c,r,e):void 0;void 0===d&&(d=e[c]),o?Ce(r,c,d):(d=d,a=void 0,a=(i=r)[c=c],gt.call(i,c)&&l(a,d)&&(void 0!==d||c in i)||Ce(i,c,d))}return r}function je(e,t){var r=h(e);return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&vt.test(e))&&-1<e&&e%1==0&&e<t}function Ve(e){return at(e)?mt(e,!0):bt(e)}function Qe(g,v,y,m,E){g!==v&&De(v,function(e,t){var r,n,o,i,a,s,u,c,d,l,p,h,f;E=E||new be,b(e)?(n=v,i=y,a=Qe,s=m,u=E,p=ft(r=g,o=t),h=ft(n,o),(f=u.get(h))?Oe(r,o,f):((n=void 0===(f=s?s(p,h,o+"",r,n,u):void 0))&&(d=!(c=ot(h))&&ut(h),l=!c&&!d&&ht(h),f=h,c||d||l?f=ot(p)?p:st(p)?Ie(p):d?Te(h,!(n=!1)):l?Se(h,!(n=!1)):[]:pt(h)||nt(h)?nt(f=p)?f=_t(p):b(p)&&!ae(p)||(f=et(h)):n=!1),n&&(u.set(h,f),a(f,h,i,s,u),u.delete(h)),Oe(r,o,f))):(c=m?m(ft(g,t),e,t+"",g,v,E):void 0,Oe(g,t,c=void 0===c?e:c))},Ve)}function xe(e){return e}function qe(r,e){return Object.assign.apply(Object,u([{}],e.map(function(e){var t;return(t={})[e]=r[e],t})))}function Me(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Object.assign.apply(Object,u([{}],e.reverse()))}function Ge(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return At.apply(void 0,u([e],t.reverse(),[wt(e)]))}function We(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];"string"==typeof(o=t)||null!=o&&o.constructor===String||(r.unshift(t),t=void 0);var o=e.overlay.apply(e,u(r,[{eventCategory:"userInteraction"}]));return o.uiEventName=t||[(e=o).eventAction,e.pageSection,e.eventLabel].filter(function(e){return e}).join("."),[t||o.eventAction,o]}function Fe(e){try{var t,r,n,o=new URL(e).search.substring(1),i=new URLSearchParams(o),a={},s={},u=(i.forEach(function(e,t){(St||[]).includes(t)&&(a[t]=e),["pl","cr"].includes(t)&&!s[t]&&(s[t]=e)}),{});return Object.keys(a).length&&(u.parameters=a),Object.keys(s).length&&(t=s.pl,r=s.cr,n=t.split("-",2),u.basket=n[0],u.carton=n[1],u.egg=r),Object.keys(u).length?{visit:u}:{}}catch(e){return null}}He=Object.getPrototypeOf,Be=Object;var He,Be,ze,Ke,Je,$e,Ye,Xe=function(e){return He(Be(e))},Ze=Object.prototype,et=function(e){return"function"!=typeof e.constructor||Ne(e)?{}:ke(Xe(e))},f=Object.prototype,tt=f.hasOwnProperty,rt=f.propertyIsEnumerable,nt=Pe(function(){return arguments}())?Pe:function(e){return D(e)&&tt.call(e,"callee")&&!rt.call(e,"callee")},ot=Array.isArray,it=function(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=9007199254740991},at=function(e){return null!=e&&it(e.length)&&!ae(e)},st=function(e){return D(e)&&at(e)},ut=t(function(e,t){var t=t&&!t.nodeType&&t,r=t&&e&&!e.nodeType&&e,r=r&&r.exports===t?y.Buffer:void 0,t=(r?r.isBuffer:void 0)||Le;e.exports=t}),e=Function.prototype,f=Object.prototype,ct=e.toString,dt=f.hasOwnProperty,lt=ct.call(Object),pt=function(e){if(!D(e)||"[object Object]"!=Y(e))return!1;e=Xe(e);if(null===e)return!0;e=dt.call(e,"constructor")&&e.constructor;return"function"==typeof e&&e instanceof e&&ct.call(e)==lt},T={},e=(T["[object Float32Array]"]=T["[object Float64Array]"]=T["[object Int8Array]"]=T["[object Int16Array]"]=T["[object Int32Array]"]=T["[object Uint8Array]"]=T["[object Uint8ClampedArray]"]=T["[object Uint16Array]"]=T["[object Uint32Array]"]=!0,T["[object Arguments]"]=T["[object Array]"]=T["[object ArrayBuffer]"]=T["[object Boolean]"]=T["[object DataView]"]=T["[object Date]"]=T["[object Error]"]=T["[object Function]"]=T["[object Map]"]=T["[object Number]"]=T["[object Object]"]=T["[object RegExp]"]=T["[object Set]"]=T["[object String]"]=T["[object WeakMap]"]=!1,t(function(e,t){var t=t&&!t.nodeType&&t,r=t&&e&&!e.nodeType&&e,n=r&&r.exports===t&&Z.process,t=function(){try{return r&&r.require&&r.require("util").types||n&&n.binding&&n.binding("util")}catch(e){}}();e.exports=t})),f=e&&e.isTypedArray,ht=f?(ze=f,function(e){return ze(e)}):function(e){return D(e)&&it(e.length)&&!!T[Y(e)]},ft=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]},gt=Object.prototype.hasOwnProperty,vt=/^(?:0|[1-9]\d*)$/,yt=Object.prototype.hasOwnProperty,mt=function(e,t){var r,n=ot(e),o=!n&&nt(e),i=!n&&!o&&ut(e),a=!n&&!o&&!i&&ht(e),s=n||o||i||a,u=s?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],c=u.length;for(r in e)!t&&!yt.call(e,r)||s&&("length"==r||i&&("offset"==r||"parent"==r)||a&&("buffer"==r||"byteLength"==r||"byteOffset"==r)||je(r,c))||u.push(r);return u},Et=Object.prototype.hasOwnProperty,bt=function(e){if(b(e)){var t,r=Ne(e),n=[];for(t in e)("constructor"!=t||!r&&Et.call(e,t))&&n.push(t);return n}var o=e,i=[];if(null!=o)for(var a in Object(o))i.push(a);return i},_t=function(e){return Ue(e,Ve(e))},Ct=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)},Ot=Math.max,Dt=Date.now,Tt=(Ke=_e?function(e,t){return _e(e,"toString",{configurable:!0,enumerable:!1,value:(r=t,function(){return r}),writable:!0});var r}:xe,$e=Je=0,function(){var e=Dt(),t=16-(e-$e);if($e=e,0<t){if(800<=++Je)return arguments[0]}else Je=0;return Ke.apply(void 0,arguments)}),At=(Ye=function(e,t,r){Qe(e,t,r)},function(e,t){return Tt((i=e,s=xe,a=Ot(void 0===(a=t)?i.length-1:a,0),function(){for(var e=arguments,t=-1,r=Ot(e.length-a,0),n=Array(r);++t<r;)n[t]=e[a+t];for(var t=-1,o=Array(a+1);++t<a;)o[t]=e[t];return o[a]=s(n),Ct(i,this,o)}),e+"");var i,a,s}(function(e,t){var r=-1,n=t.length,o=1<n?t[n-1]:void 0,i=2<n?t[2]:void 0,o=3<Ye.length&&"function"==typeof o?(n--,o):void 0;for(i&&function(e,t,r){if(!b(r))return!1;var n=h(t);return!!("number"==n?at(r)&&je(t,r.length):"string"==n&&t in r)&&l(r[t],e)}(t[0],t[1],i)&&(o=n<3?void 0:o,n=1),e=Object(e);++r<n;){var a=t[r];a&&Ye(e,a,r)}return e})),St=["gclid","kw","gclsrc","msclkid","fbclid","yclid","image_type","irgwc","irclickid","int_source","int_medium","int_campaign","int_content","utm_medium","utm_source","utm_campaign","utm_term"],It=["email","visitor_id"],wt=function(e){return At({},e)},kt={page:{}},Rt=(Nt.prototype.update=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return At.apply(void 0,u([this.data],e)),this.toJSON()},Nt.prototype.overlay=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return At.apply(void 0,u([{eventAction:null,eventLabel:null,eventCategory:null},this.data],e))},Nt.prototype.toJSON=function(){return wt(this.data)},Nt),e={click:"click",submit:"submit",change:"change",hover:"mouseenter"};function Nt(e){this.data=e,this.data=wt(Ge(e,kt))}Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),r=t.length,n=new Array(r);r;)n[--r]=[t[r],e[t[r]]];return n});function Pt(e,n){return function(r){return Object.entries(e).map(function(e){var t=e[0];return{action:t,domEvent:e[1],handler:r(t),delegate:n}})}}var Lt=Pt(qe(e,["hover"]),!1),Ut=Pt(qe(e,["change","click","submit"]),!0),jt="[data-track]";function Vt(e){var t,r,n,o;e.dataset&&void 0!==e.dataset.track&&(t=(o=e.dataset.track.trim().split("."))[0],r=o[1],n=o[2],o=o.slice(3),delete e.dataset.track,e.dataset.trackAction=t.replace(/\s*,\s*/," ").trim(),void 0!==r&&(e.dataset.trackSection=r.trim()),void 0!==n&&(e.dataset.trackLabel=n.trim()),o.length&&(e.dataset.trackValue=o.join(".").trim()))}var Qt,xt=w,A=0,qt=0,S={},I={};function Mt(e,t,r,n){if(this.element){e instanceof Array||(e=[e]),r||"function"!=typeof t||(r=t,t="_root");for(var l=this.id,o=0;o<e.length;o++)if(n){i=void 0;a=void 0;s=void 0;u=void 0;c=void 0;p=void 0;d=void 0;h=void 0;h=void 0;f=void 0;var i=this;var a=e[o];var s=t;var u=r;if(S[i.id])if(a)if(u||s)if(u){if(S[i.id][a]&&S[i.id][a][s]){for(var c=0;c<S[i.id][a][s].length;c++)if(S[i.id][a][s][c]===u){S[i.id][a][s].splice(c,1),S[i.id][a][s].match=void 0;break}var d,p=!1;for(d in S[i.id])for(var h in S[i.id][d]){h=S[i.id][d][h];if(Array.isArray(h)&&0<h.length){p=!0;break}}p||delete I[i.id]}}else delete S[i.id][a][s];else S[i.id][a]={};else for(var f in S[i.id])S[i.id].hasOwnProperty(f)&&(S[i.id][f]={})}else S[l]&&S[l][e[o]]||w.addEvent(this,e[o],function(d){return function(e){var t=l,r=e,n=d;if(S[t][n]){var o,i,a=r.target||r.srcElement,s={},u=0,c=0;for(o in A=0,S[t][n])S[t][n].hasOwnProperty(o)&&(i=function e(t,r,n){return"_root"==r?n:t!==n?(o=t,(Qt=Qt||o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.msMatchesSelector||o.oMatchesSelector||w.matchesSelector).call(t,r)?t:t.parentNode?(A++,e(t.parentNode,r,n)):void 0):void 0;var o}(a,o,I[t].element))&&w.matchesEvent(n,I[t].element,i,"_root"==o,r)&&(A++,S[t][n][o].match=i,s[A]=S[t][n][o]);for(r.stopPropagation=function(){r.cancelBubble=!0},u=0;u<=A;u++)if(s[u])for(c=0;c<s[u].length;c++){if(!1===s[u][c].call(s[u].match,r))return void w.cancel(r);if(r.cancelBubble)return}}}}(e[o])),g=this,v=e[o],y=t,m=r,S[g.id]||(S[g.id]={}),S[g.id][v]||(S[g.id][v]={}),S[g.id][v][y]||(S[g.id][v][y]=[]),S[g.id][v][y].push(m);return this}var g,v,y,m}function w(e,t){if(!(this instanceof w)){for(var r in I)if(I[r].element===e)return I[r];return I[++qt]=new w(e,qt),I[qt]}this.element=e,this.id=t}w.prototype.on=function(e,t,r){return Mt.call(this,e,t,r)},w.prototype.off=function(e,t,r){return Mt.call(this,e,t,r,!0)},w.matchesSelector=function(){},w.cancel=function(e){e.preventDefault(),e.stopPropagation()},w.addEvent=function(e,t,r){e.element.addEventListener(t,r,"blur"==t||"focus"==t)},w.matchesEvent=function(){return!0};function Gt(t,r){return function(e){return xt(e).off(t,r).on(t,r)}}function Wt(s){return function(a){return new v.MutationObserver(function(e){e.forEach(function(e){var t,r,n,o,i;t=s,r=a,n=(n=Array.from(e.removedNodes)).filter(function(e){return e.nodeType===v.Node.ELEMENT_NODE}).reduce(Ht(k(r.action)),[]),r.delegate&&0<n.length?Bt(t)(r):r.delegate||n.forEach((o=r.domEvent,i=r.handler,function(e){return xt(e).off(o,i)})),t=a,n=Array.from(e.addedNodes),t.delegate||n.filter(function(e){return e.nodeType===v.Node.ELEMENT_NODE}).reduce(Ht(k(t.action)),[]).forEach(Gt(t.domEvent,t.handler))})}).observe(s,{childList:!0,subtree:!0})}}function Ft(r,n){return function(t){return function(e){(Kt[t]||Kt.default)(r[t].bind(r))(e.target,g(g({},n(this,e)),{eventAction:t,pageSection:this.dataset.trackSection,eventLabel:this.dataset.trackLabel,name:(e=e.target).name||e.textContent,eventValue:function(e){try{return JSON.parse(e.dataset.trackValue||"{}")}catch(e){return{}}}(this)}))}}}var Ht=function(r){return function(e,t){return e.concat(t.matches(r)?t:[],Array.from(t.querySelectorAll(r)))}},k=function(e){return"[data-track-action~="+e+"]"},Bt=function(n){return function(e){var t=e.action,r=e.domEvent,e=e.handler;return xt(n).off(r,k(t),e).on(r,k(t),e)}},zt=(void 0!==v&&v.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t){t=t||void 0!==v&&v;for(var r=0;r<this.length;r+=1)e.call(t,this[r],r,this)}),{checkbox:function(e){return Array.from(document.getElementsByName(e.name)).filter(function(e){return e.checked}).map(function(e){return e.value})},"select-multiple":function(e){return Array.from(e.selectedOptions).map(function(e){return e.value})},default:function(e){return e.value}}),Kt={change:function(r){return function(e,t){Object.assign(t.eventValue,{formElementValue:(zt[e.type]||zt.default)(e)}),r(t)}},hover:function(a){return function(n,o){var i=(new Date).getTime();n.addEventListener("mouseleave",function e(){var t=(new Date).getTime()-i,r=o.eventValue.hoverTimeThreshold;(void 0===r?1500:r)<t&&(Object.assign(o.eventValue,{hoverTime:t}),a(o)),n.removeEventListener("mouseleave",e)})}},default:function(r){return function(e,t){return r(t)}}},Jt={scope:v.document,initialData:function(){return{}}},$t=(Yt.prototype.listen=function(a){var s=this;return new Promise(function(e){o=Ft(a,s.options.initialData);var n,t,r,o={direct:Lt(o),delegated:Ut(o)},i=o.direct,o=o.delegated;t=s.options.scope,(r=[t]).concat.apply(r,t.querySelectorAll(jt)).forEach(Vt),r=t,new v.MutationObserver(function(e){return e.reduce(function(e,t){return e.concat(Array.from(t.addedNodes))},[]).filter(function(e){return e.nodeType===v.Node.ELEMENT_NODE}).reduce(function(e,t){return e.concat(t.matches(jt)?t:[],Array.from(t.querySelectorAll(jt)))},[]).forEach(Vt)}).observe(r,{childList:!0,subtree:!0}),t=s.options.scope,o.forEach(Bt(t)),r=s.options.scope,i.forEach((n=r,function(e){var t=e.action,r=e.domEvent,e=e.handler;return n.querySelectorAll(k(t)).forEach(Gt(r,e))})),t=u(o,i),r=s.options.scope,t.forEach(Wt(r)),e()})},Yt.prototype.getOptions=function(){return this.options},Yt);function Yt(e){this.options=e=void 0===e?{}:e,this.options=Me(e,Jt)}v.requestIdleCallback=v.requestIdleCallback||function(t){return setTimeout(function(){var e=Date.now();t({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-e))}})},100)};function Xt(n,o,i){return void 0===i&&(i={}),new Promise(function(e,t){var r=new XMLHttpRequest;r.onreadystatechange=function(){4===this.readyState&&(200===this.status?e(this.responseText):t(new Error("Coudln't post "+n)))},r.open("POST",n,!0),i.basicAuth&&(r.setRequestHeader("Content-Type","application/json"),r.setRequestHeader("Authorization","Bearer "+i.basicAuth)),r.withCredentials=!0,r.send(o)})}P.prototype.startProcessing=function(){this.logger.info("starting the message queue"),this.started=!0,0<this.messageQueue.length&&!this.taskHandle&&(this.taskHandle=v.requestIdleCallback(this.processQueue.bind(this),{timeout:1e3}))},P.prototype.stopProcessng=function(){this.started=!1},P.prototype.enqueue=function(e,t,r){this.messageQueue.push({handler:e,name:t,payload:r}),this.started&&!this.taskHandle&&(this.taskHandle=v.requestIdleCallback(this.processQueue.bind(this),{timeout:1e3}))},P.prototype.processQueue=function(e){for(var t=e,r=this;(0<t.timeRemaining()||t.didTimeout)&&r.messageQueue.length&&r.started;){var n=r.messageQueue.shift();n.handler.handleEvent(n.name,n.payload)}this.messageQueue.length&&this.started?this.taskHandle=v.requestIdleCallback(this.processQueue.bind(this),{timeout:1e3}):this.taskHandle=0};var R,Zt,er=P,tr=(V(N,Zt=z),N.prototype.updateGaId=function(){var e=this.getCookie("_ga");this.gaId=e?e.split(".").slice(2).join("."):null},N.prototype.shouldUpdate=function(){return!this.gaId},Object.defineProperty(N.prototype,"clientId",{get:function(){return this.shouldUpdate()&&this.updateGaId(),this.gaId},enumerable:!1,configurable:!0}),N);function N(){var e=Zt.call(this,"")||this;return e.gaId=null,e}function P(){this.logger=i.getLogger(),this.taskHandle=0,this.started=!1,this.messageQueue=[]}(f=R=R||{}).ACCOUNT_CREATED="accountCreationSuccess",f.ACCOUNT_CREATED_IFRAME="accountCreationSuccess-iframe",f.CART_VIEWED="Cart Viewed",f.CHECKOUT_START="checkoutStart",f.CHECKOUT_STARTED="Checkout Started",f.COMPONENT_VIEWED="Component Viewed",f.DOWNLOAD="download-success",f.ERROR="Error",f.EXPERIMENT_VIEWED="Experiment Viewed",f.IDENTIFY="Identify",f.INVITE_SENT="Invite Sent",f.ORDER_COMPLETED="Order Completed",f.PAGE="Page",f.PAYMENT_INFO_ENTERED="Payment Info Entered",f.PRODUCT_ADDED="Product Added",f.PRODUCT_ADDED_TO_WISH_LIST="Product Added To Wishlist",f.PRODUCT_CLICKED="Product Clicked",f.PRODUCT_DOWNLOADED="Product Downloaded",f.PRODUCT_LICENSED="Product Licensed",f.PRODUCT_LIST_FILTERED="Product List Filtered",f.PRODUCT_LIST_VIEWED="Product List Viewed",f.PRODUCT_REMOVED="Product Removed",f.PRODUCT_REMOVED_FROM_WISH_LIST="Product Removed from Wishlist",f.PRODUCT_SHARED="Product Shared",f.PRODUCT_VIEWED="Product Viewed",f.PRODUCT_SEARCHED="Products Searched",f.PROMOTION_VIEWED="Promotion Viewed",f.PROMOTION_CLICKED="Promotion Clicked",f.PURCHASE_SUCCESS="purchaseSuccess",f.SEARCHED="searchResults",f.SIGNED_IN="Signed In",f.SIGNED_OUT="Signed Out",f.SIGNED_UP="Signed Up",f.TRACK="Track",f.ACCOUNT_VERIFIED="Account Verified",f.ACCOUNT_SWITCHED="Account Switched",f.DESIGN_RENDERED="Design Rendered",f.DESIGN_SHARED="Design Shared",f.TEMPLATE_LOADED="Template Loaded",f.IMAGE_UPLOADED="Image Uploaded",f.ASSET_VIEWED="Asset Viewed",f.BATCH_EVENTS="Batch of Event",f.CALENDAR_SUBSCRIBED="Calendar Subscribed",f.CALENDAR_UNSUBSCRIBED="Calendar Unsubscribed",f.CALENDAR_TOGGLED_ON="Calendar Toggled On",f.CALENDAR_TOGGLED_OFF="Calendar Toggled Off",f.CALENDAR_TOPIC_SCHEDULED="Calendar Topic Scheduled",f.PRODUCT_UPLOADED="Product Uploaded";(e={})[R.ASSET_VIEWED]=2e3,e.default=1e3;var rr,nr=e,or=(lr.prototype.add=function(e,t){var r,n=this;this.eventsQueue[e]?this.eventsQueue[e].callback=t:(r=this.delays[e]||this.delays.default,this.eventsQueue[e]={timeout:setTimeout(function(){return n.send(e)},r),callback:t})},lr.prototype.send=function(e){var t=(this.eventsQueue[e]||{}).callback;t&&t(),this.clear(e)},lr.prototype.clear=function(e){var t=(this.eventsQueue[e]||{}).timeout;t&&clearTimeout(t),delete this.eventsQueue[e]},lr),ir=(dr.prototype.send=function(e,t,r){if(void 0===t&&(t={}),void 0===r&&(r={}),!e||0===e.length)return Promise.resolve();this.logger.debug("Sending batch events with "+e.length+" items");var n,o,i=v.JSON.stringify({batch:e,context:t,integrations:r});if(this.isOverLimit(i))return this.logger.debug("Batch is over limit of 400kb, spliting batch"),o=Math.ceil(e.length/2),n=e.slice(0,o),e=e.slice(o),(o=[]).push(this.send(n,t,r)),o.push(this.send(e,t,r)),Promise.all(o);r=(null==(t=null==(e=null==(n=v.analytics)?void 0:n.options)?void 0:e.metrics)?void 0:t.host)||"api.segment.io/v1";return Xt("https://"+r+"/batch",i,{basicAuth:this.basicAuth})},dr.prototype.isOverLimit=function(e){e=function(t){var r;try{r=(encodeURI(t).split(/%..|./).length-1)/1024}catch(e){r=t.length/1024}return r}(e);return this.logger.debug("Size of batch is "+e),400<e},dr),ar="cdn.segment.com",sr=(cr.prototype.setAnonymousId=function(r){return x(this,void 0,void 0,function(){var t;return q(this,function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return void 0!==v.analytics.user?[3,3]:[4,new Promise(function(e){setTimeout(function(){return e()},500)})];case 2:return e.sent(),6<=(t+=1)?[3,3]:[3,1];case 3:return void 0===v.analytics.user?(this.logger.debug("Unable to set anonymousId"),[2,!1]):(this.logger.debug("Ticks: "+t),v.analytics.user().anonymousId(r),[2,!0])}})})},cr),ur=(V(L,rr=z),L.Expiration=18e5,L.Extension=9e5,L);function L(){var r=rr.call(this,"sstk_session_id")||this;return r.extendSessionIdExpiration=function(){var e=Date.now()-r.startTime,t=r.sessionId||r.getCookie(r.cookie.name);return!t||L.Expiration<e?(r.logger.debug("creating new session Id"),t=r.getUniqueCookieValue(),r.setCookie(r.cookie.name,t,L.Expiration)):(t&&!r.sessionId||L.Extension<e)&&(r.startTime=Date.now(),r.logger.debug("extending session Id"),r.updateCookieExpiration(L.Expiration)),t.replace(/["]+/g,"")},r.startTime=Date.now(),r.sessionId=r.extendSessionIdExpiration(),r}function cr(e){var f=this;this.load=function(n){return x(f,void 0,void 0,function(){var t,r;return q(this,function(e){switch(e.label){case 0:return t=n.segmentId,this.batch=new ir({segmentId:t}),(this.config=n).consentCategories&&!Array.isArray(n.consentCategories)?[2,Promise.reject(new Error("Categories should be an array"))]:(r=n,[4,this.mapSegmentOptions(n)]);case 1:return r.segmentOptions=e.sent(),[4,this.loadSegment(n)];case 2:return[2,e.sent()]}})})},this.mapSegmentOptions=function(e){var t=e.segmentId,s=e.consentCategories,r=e.proxyDomain,u=f;return new Promise(function(a,e){if(!s||s.length<1)return a({});var n,o;u.logger.debug("Loading segment integrations"),n="https://"+(r||ar)+"/v1/projects/"+t+"/integrations",void 0===o&&(o={json:!0}),new Promise(function(t,r){var e=new XMLHttpRequest;e.onreadystatechange=function(){var e;4===this.readyState&&(200===this.status?(e=o.json?JSON.parse(this.responseText):this.responseText,t(e)):r(new Error("Coudln't fetch "+n)))},e.open("GET",n,!0),e.send()}).then(function(e){for(var t={},r=s.join(";").toLowerCase().split(";"),n=0,o=e;n<o.length;n++){var i=o[n];t[i.name]=0<=r.indexOf(i.category.toLowerCase())}return u.logger.debug("Segment integrations: "+t),a({integrations:t})}).catch(e)})},this.loadSegment=function(e){var s=e.segmentId,u=e.anonymousId,t=e.segmentOptions,c=void 0===t?{}:t,d=e.proxyDomain,l=f;return new Promise(function(n,o){var i=v.analytics=v.analytics||[];if(i.initialize)o(new Error("Segment already initialized"));else if(i.invoked){var e=new Error("Segment snippet included twice.");l.logger.error(e.message),o(e)}else{var a="https://"+(d||ar)+"/analytics.js/v1/"+s+"/analytics.min.js";i.invoked=!0,i.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"],i.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);return e.unshift(t),i.push(e),i}};for(var t=0;t<i.methods.length;t++){var r=i.methods[t];i[r]=i.factory(r)}i.load=function(){var e=this,t=document.createElement("script"),r=(t.type="text/javascript",t.async=!0,t.src=a,t.onload=function(){return x(e,void 0,void 0,function(){return q(this,function(e){switch(e.label){case 0:return l.logger.debug("segment has been loaded"),l.providerLoaded=!0,u?[4,l.setAnonymousId(u)]:[3,2];case 1:e.sent(),e.label=2;case 2:return n(),[2]}})})},t.onerror=function(){o(new Error("Unable to load analytics js."))},document.getElementsByTagName("script")[0]);r.parentNode.insertBefore(t,r),i._loadOptions=c},i._writeKey=s,i.SNIPPET_VERSION="4.13.2",i.load()}})},this.setupTagCollector=function(e){var o;f.tagCollectorLoaded?f.logger.warn("tag collector integration has already been setup."):(f.tagCollectorUrl=e,f.providerLoaded?(o=function(e,t){return e.timestamp||(e.timestamp=new Date),e.type||(e.type=t),e},v.analytics.on("page",function(e,t,r,n){r=v.analytics.normalize({properties:r,category:e,options:n,name:t});o(r,"page"),Xt(f.tagCollectorUrl,v.JSON.stringify(r)).catch(function(e){return f.logger.error(e)})}),v.analytics.on("track",function(e,t,r){e=v.analytics.normalize({event:e,properties:t,options:r});o(e,"track"),Xt(f.tagCollectorUrl,v.JSON.stringify(e)).catch(function(e){return f.logger.error(e)})}),v.analytics.on("identify",function(e,t,r){e=v.analytics.normalize({id:e,traits:t,options:r});o(e,"identify"),Xt(f.tagCollectorUrl,v.JSON.stringify(e)).catch(function(e){return f.logger.error(e)})}),f.tagCollectorLoaded=!0):f.tagCollectorUrl=e)},this.handleEvent=function(e,t){var r=(t||{}).data,n=f.gaId.clientId,o={};switch(n&&(o.integrations={"Google Analytics":{clientId:n}}),e){case R.PAGE:f.trackEventPage(r,o);break;case R.IDENTIFY:f.trackEventIdentify(r,o);break;case R.ACCOUNT_CREATED:f.trackEventAccountCreated(r,o);break;case R.SIGNED_UP:f.trackEventSignedUp(r,o);break;case R.SIGNED_OUT:f.trackEventSignedOut(r,o);break;case R.SIGNED_IN:f.trackEventSignedIn(r,o);break;case R.TRACK:f.trackNonKpiStandard(t,o);break;case R.ASSET_VIEWED:f.trackAssetViewed(r,o);break;case R.BATCH_EVENTS:f.trackBatchEvent(t,o);break;default:f.trackDefaultEvent(r,e,o)}},this.trackEventPage=function(e,t){try{var r=e.page.pageType;f.logger.info("EVENT pageview: "+r),v.analytics.page(r,e,t),f.eventDebounce.send(R.ASSET_VIEWED)}catch(e){f.logger.error("EVENT ERROR pageview")}},this.trackEventIdentify=function(e,t){void 0===t&&(t={});try{var r=e.userId,n=e.traits,o=e.opt,i=e.anonymousId,a=g({},t),s=f.composeExternalIds(o);s&&(a.externalIds=s),f.logger.info("EVENT identify"),v.analytics.identify(r,n,a),i&&v.analytics.user&&v.analytics.user().anonymousId(i)}catch(e){f.logger.error("EVENT ERROR identify")}},this.trackEventAccountCreated=function(e,t){try{f.logger.info("EVENT track: account created"),v.analytics.track(R.ACCOUNT_CREATED,e,t),v.analytics.track(R.ACCOUNT_CREATED_IFRAME,e,t)}catch(e){f.logger.error("EVENT ERROR track: account created")}},this.trackEventSignedUp=function(e,t){void 0===t&&(t={});try{f.logger.info("EVENT track: Signed up"),e.opt;var r=Q(e,["opt"]);v.analytics.track(R.SIGNED_UP,r,t),v.analytics.track(R.ACCOUNT_CREATED_IFRAME,r,t)}catch(e){f.logger.error("EVENT ERROR track: Signed up")}},this.trackEventSignedOut=function(e,t){try{f.logger.info("EVENT track: Signed out"),v.analytics.reset(),e.segmentAnonymousId&&v.analytics.user().anonymousId(e.segmentAnonymousId),v.analytics.track(R.SIGNED_OUT,e,t)}catch(e){f.logger.error("EVENT ERROR track: Signed out")}},this.trackEventSignedIn=function(e,t){void 0===t&&(t={});try{f.logger.info("EVENT track: Signed In"),e.opt;var r=Q(e,["opt"]);v.analytics.track(R.SIGNED_IN,r,t)}catch(e){f.logger.error("EVENT ERROR track: Signed out")}},this.trackDefaultEvent=function(e,t,r){try{f.logger.info("EVENT track: "+t),v.analytics.track(t,e,r)}catch(e){f.logger.error("EVENT ERROR track: "+t)}},this.trackNonKpiStandard=function(e,t){var r=e.name;f.trackDefaultEvent(e.data,r,t)},this.trackAssetViewed=function(e,t){f.eventDebounce.add(R.ASSET_VIEWED,function(){try{f.logger.info("EVENT track: Asset Viewed"),v.analytics.track(R.ASSET_VIEWED,e,t)}catch(e){f.logger.error("EVENT ERROR track: Asset viewed")}})},this.trackBatchEvent=function(e,t){try{var n=e.event,r=e.list,o=t.integrations,i=v.analytics,a=(i.normalize({})||{context:{}}).context,s={name:"analytics.js",version:i.VERSION||"4.13.2"},u=v.navigator,c=u.language,d=u.userAgent,l=g(g({},a),{library:s,locale:c,userAgent:d}),p=[],h=(v.dataLayer=v.dataLayer||[],v.dataLayer);r.forEach(function(e){var t=e.userId||i.user().id(),r=e.anonymousId||i.user().anonymousId();p.push({type:"track",event:n,properties:e,userId:t,anonymousId:r}),h.push(g({event:n,userId:t,segmentAnonymousId:r},e))}),f.batch.send(p,l,o)}catch(e){f.logger.error("EVENT ERROR track: Batch: "+JSON.stringify(e))}},this.composeExternalIds=function(t){if(!t)return null;var r=[];return Object.keys(t).forEach(function(e){0<=It.indexOf(e)&&r.push({id:t[e],type:e,collection:"users",encoding:"none"})}),r&&0<r.length?r:null},this.providerLoaded=!1,this.tagCollectorLoaded=!1,this.tagCollectorUrl=null,this.logger=i.getLogger(),this.eventDebounce=new or(null==e?void 0:e.eventDelays),this.gaId=new tr}function dr(e){e=e.segmentId;this.basicAuth=btoa(e+":"),this.logger=i.getLogger()}function lr(e){this.eventsQueue={},this.delays=nr,this.delays=g(g({},this.delays),e)}return U.prototype.loadProvider=function(o,i){var a=this;return new Promise(function(t,r){var e=o||a.options.sourceId,n=i||a.options.consentCategories;return e?a.provider.load({segmentId:e,anonymousId:a.anonId.anonId,consentCategories:n,proxyDomain:a.options.proxyDomain}).then(function(){var e;a.options.tagCollectorUrl&&a.provider.setupTagCollector(a.options.tagCollectorUrl),a.initialDataSet?a.messageQueue.startProcessing():(e=Fe(window.location.href),Object.keys(e).length&&(a.setData(e),a.provider.providerLoaded&&!a.messageQueue.started&&a.messageQueue.startProcessing())),t(a)}).catch(function(e){a.logger.error("error starting wrapper: "+e,!0),r(e)}):(a.logger.error(e="unable to load AnalyticsWrapper due to missing source id",!0),r(new Error(e)))})},U.prototype.setInitialData=function(t){var e=Fe((null==(e=null==t?void 0:t.page)?void 0:e.originalUrl)||"");e&&this.setData(e),this.data.update(t||{}),this.initialDataSet||(this.messageQueue.messageQueue.forEach(function(e){e.payload.data=Ge(e.payload.data,t)}),this.provider.providerLoaded&&!this.messageQueue.started&&this.messageQueue.startProcessing()),this.initialDataSet=!0},U.prototype.setData=function(e){this.data.update(e||{})},U.prototype.startListener=function(e){return this.listener?this.logger.warn("listener has already been started"):(this.listener=new $t(e),this.listener.listen(this)),this},U.prototype.enableErrorMonitor=function(e){var r=this;return void 0===e&&(e={}),this.errorMonitor?this.logger.warn("Error monitor has already been started"):((e=Me(e,{scope:v})).scope.addEventListener("error",function(e){var t;e&&(e.error&&e.error.stack&&(t=e.error.stack.substring(0,150)),e={message:e.message,file:e.filename,lineNumber:e.lineno,columnNumber:e.colno,stackTrace:t,sourceType:"javascript"},r.error(e))}),this.errorMonitor=!0),this},U.prototype.setTagCollectorUrl=function(e){return!this.provider.tagCollectorLoaded&&this.provider.providerLoaded?this.provider.setupTagCollector(e):this.provider.tagCollectorUrl=e,this},U.prototype.page=function(e,t){var r,t=(t=t)||("object"==typeof e?e:{}),e=this.sessionId.extendSessionIdExpiration(),t=this.data.update({page:t,sstk_session_id:e});return this.initialDataSet&&(!this.options.deferLoadProvider||this.provider.providerLoaded)||(t=Me(t,(e=v.location.href,e=-1===(r=e.indexOf("#"))?e:e.slice(0,r),{path:v.location.pathname,referrer:v.document.referrer,search:v.location.search,title:v.document.title,url:e}))),this.messageQueue.enqueue(this.provider,R.PAGE,{data:t}),this},U.prototype.identify=function(e,t,r){var n=this.data.toJSON().user;if(n){var o=n.isImpersonated,i=n.id;if((o="string"==typeof o?"true"===o:o)||!i||""===i)return this}o={userId:e,traits:t||{},opt:r||{},anonymousId:""},i=this.getAnonID(),i&&(o.anonymousId=i),"object"==typeof e&&null!=e&&(o.traits=e,o.userId=e.id),o.traits.is_merged_identity=!1,o.userId||n&&n.id&&(o.userId=n.id),t=this.data.toJSON().visit;return t&&t.visitorId&&(o.opt.visitor_id=t.visitorId),this.messageQueue.enqueue(this.provider,R.IDENTIFY,{data:o}),this},U.prototype.accountCreated=function(e){e=this.data.update({user:e});return this.messageQueue.enqueue(this.provider,R.ACCOUNT_CREATED,{data:e}),this},U.prototype.downloaded=function(e,t){e=this.data.overlay({eventValue:e=void 0===e?{}:e,searchContext:t=void 0===t?{}:t});return this.messageQueue.enqueue(this.provider,R.DOWNLOAD,{data:e}),this},U.prototype.experiment=function(e){e=this.data.overlay(e=void 0===e?{}:e);return this.messageQueue.enqueue(this.provider,R.EXPERIMENT_VIEWED,{data:e}),this},U.prototype.searched=function(e){e=this.data.overlay({searchContext:e=void 0===e?{}:e});return this.messageQueue.enqueue(this.provider,R.SEARCHED,{data:e}),this},U.prototype.checkoutStarted=function(e){var t;return(e=void 0===e?{}:e).currencyCode?(t=this.data.overlay({ecommerce:e}),this.messageQueue.enqueue(this.provider,R.CHECKOUT_START,{data:t})):(t=this.data.overlay(e),this.messageQueue.enqueue(this.provider,R.CHECKOUT_STARTED,{data:t})),this},U.prototype.orderCompleted=function(e){var t;return(e=void 0===e?{}:e).currencyCode?(t=this.data.overlay({ecommerce:e}),this.messageQueue.enqueue(this.provider,R.PURCHASE_SUCCESS,{data:t})):(t=this.data.overlay(e),this.messageQueue.enqueue(this.provider,R.ORDER_COMPLETED,{data:t})),this},U.prototype.customEvent=function(e,t){t=this.data.overlay(t=void 0===t?{}:t);return this.messageQueue.enqueue(this.provider,R.TRACK,{name:e,data:t}),this},U.prototype.gaEvent=function(e,t){void 0===t&&(t={}),this.logger.warn("gaEvent should not be used, please use customEvent method instead");e=this.data.overlay(t,{name:e});return e.eventCategory=t.eventAction,e.eventAction=t.eventLabel,delete e.eventLabel,this.messageQueue.enqueue(this.provider,R.TRACK,{name:"gaEvent",data:e}),this},U.prototype.error=function(e){void 0===e&&(e={});var t,r,n=this.data.overlay({error:(n=(e=e).message,t=e.name,r=e.stack,g({message:n,name:t,stack:r},e))});return this.messageQueue.enqueue(this.provider,R.ERROR,{name:"Error",data:n}),this},U.prototype.click=function(e,t){e=We(this.data,e,t,{eventAction:"click"}),t=e[0],e=e[1];return this.messageQueue.enqueue(this.provider,R.TRACK,{name:t,data:e}),this},U.prototype.change=function(e,t){e=We(this.data,e,t,{eventAction:"change"}),t=e[0],e=e[1];return this.messageQueue.enqueue(this.provider,R.TRACK,{name:t,data:e}),this},U.prototype.hover=function(e,t){e=We(this.data,e,t,{eventAction:"hover"}),t=e[0],e=e[1];return this.messageQueue.enqueue(this.provider,R.TRACK,{name:t,data:e}),this},U.prototype.submit=function(e,t){e=We(this.data,e,t,{eventAction:"submit"}),t=e[0],e=e[1];return this.messageQueue.enqueue(this.provider,R.TRACK,{name:t,data:e}),this},U.prototype.productListViewed=function(e){e=this.data.overlay(e=void 0===e?{}:e);return this.messageQueue.enqueue(this.provider,R.PRODUCT_LIST_VIEWED,{data:e}),this},U.prototype.signedIn=function(e){e=this.data.overlay(e=void 0===e?{}:e),this.messageQueue.enqueue(this.provider,R.SIGNED_IN,{data:e}),e=e.user.id;return e&&this.identify(e),this},U.prototype.inviteSent=function(e){e=this.data.overlay(e=void 0===e?{}:e);return this.messageQueue.enqueue(this.provider,R.INVITE_SENT,{data:e}),this},U.prototype.productSearched=function(e){e=this.data.overlay(e=void 0===e?{}:e);return this.messageQueue.enqueue(this.provider,R.PRODUCT_SEARCHED,{data:e}),this},U.prototype.productAddedToWishlist=function(e){if(void 0===e&&(e={}),Array.isArray(e.products||e))return this.sendBatch(R.PRODUCT_ADDED_TO_WISH_LIST,e);e=this.data.overlay(e);return this.messageQueue.enqueue(this.provider,R.PRODUCT_ADDED_TO_WISH_LIST,{data:e}),this},U.prototype.signedUp=function(e){e=this.data.overlay(e=void 0===e?{}:e),this.messageQueue.enqueue(this.provider,R.SIGNED_UP,{data:e}),e=e.user.id;return e&&this.identify(e),this},U.prototype.cartViewed=function(e){e=this.data.overlay(e=void 0===e?{}:e);return this.messageQueue.enqueue(this.provider,R.CART_VIEWED,{data:e}),this},U.prototype.paymentInfoEntered=function(e){e=this.data.overlay(e=void 0===e?{}:e);return this.messageQueue.enqueue(this.provider,R.PAYMENT_INFO_ENTERED,{data:e}),this},U.prototype.productAdded=function(e){if(void 0===e&&(e={}),Array.isArray(e.products||e))return this.sendBatch(R.PRODUCT_ADDED,e);e=this.data.overlay(e);return this.messageQueue.enqueue(this.provider,R.PRODUCT_ADDED,{data:e}),this},U.prototype.productRemoved=function(e){if(void 0===e&&(e={}),Array.isArray(e.products||e))return this.sendBatch(R.PRODUCT_REMOVED,e);e=this.data.overlay(e);return this.messageQueue.enqueue(this.provider,R.PRODUCT_REMOVED,{data:e}),this},U.prototype.componentViewed=function(e){e=this.data.overlay(e=void 0===e?{}:e);return this.messageQueue.enqueue(this.provider,R.COMPONENT_VIEWED,{data:e}),this},U.prototype.signedOut=function(e){var e=this.data.overlay(e=void 0===e?{}:e),t=this.getAnonID();return t&&(e.segmentAnonymousId=t),this.messageQueue.enqueue(this.provider,R.SIGNED_OUT,{data:e}),this},U.prototype.promotionViewed=function(e){e=this.data.overlay(e=void 0===e?{}:e);return this.messageQueue.enqueue(this.provider,R.PROMOTION_VIEWED,{data:e}),this},U.prototype.promotionClicked=function(e){e=this.data.overlay(e=void 0===e?{}:e);return this.messageQueue.enqueue(this.provider,R.PROMOTION_CLICKED,{data:e}),this},U.prototype.productListFiltered=function(e){e=this.data.overlay(e=void 0===e?{}:e);return this.messageQueue.enqueue(this.provider,R.PRODUCT_LIST_FILTERED,{data:e}),this},U.prototype.productClicked=function(e){e=this.data.overlay(e=void 0===e?{}:e);return this.messageQueue.enqueue(this.provider,R.PRODUCT_CLICKED,{data:e}),this},U.prototype.productViewed=function(e){e=this.data.overlay(e=void 0===e?{}:e);return this.messageQueue.enqueue(this.provider,R.PRODUCT_VIEWED,{data:e}),this},U.prototype.productRemovedFromWishlist=function(e){if(void 0===e&&(e={}),Array.isArray(e.products||e))return this.sendBatch(R.PRODUCT_REMOVED_FROM_WISH_LIST,e);e=this.data.overlay(e);return this.messageQueue.enqueue(this.provider,R.PRODUCT_REMOVED_FROM_WISH_LIST,{data:e}),this},U.prototype.productShared=function(e){e=this.data.overlay(e=void 0===e?{}:e);return this.messageQueue.enqueue(this.provider,R.PRODUCT_SHARED,{data:e}),this},U.prototype.productDownloaded=function(e){if(void 0===e&&(e={}),Array.isArray(e.products||e))return this.sendBatch(R.PRODUCT_DOWNLOADED,e);e=this.data.overlay(e);return this.messageQueue.enqueue(this.provider,R.PRODUCT_DOWNLOADED,{data:e}),this},U.prototype.productLicensed=function(e){e=this.data.overlay(e=void 0===e?{}:e);return this.messageQueue.enqueue(this.provider,R.PRODUCT_LICENSED,{data:e}),this},U.prototype.accountVerified=function(e){e=this.data.overlay(e=void 0===e?{}:e);return this.messageQueue.enqueue(this.provider,R.ACCOUNT_VERIFIED,{data:e}),this},U.prototype.accountSwitched=function(e){e=this.data.overlay(e=void 0===e?{}:e);return this.messageQueue.enqueue(this.provider,R.ACCOUNT_SWITCHED,{data:e}),this},U.prototype.designRendered=function(e){e=this.data.overlay(e=void 0===e?{}:e);return this.messageQueue.enqueue(this.provider,R.DESIGN_RENDERED,{data:e}),this},U.prototype.designShared=function(e){e=this.data.overlay(e=void 0===e?{}:e);return this.messageQueue.enqueue(this.provider,R.DESIGN_SHARED,{data:e}),this},U.prototype.imageUploaded=function(e){e=this.data.overlay(e=void 0===e?{}:e);return this.messageQueue.enqueue(this.provider,R.IMAGE_UPLOADED,{data:e}),this},U.prototype.templateLoaded=function(e){e=this.data.overlay(e=void 0===e?{}:e);return this.messageQueue.enqueue(this.provider,R.TEMPLATE_LOADED,{data:e}),this},U.prototype.assetViewed=function(e){e=this.data.overlay(e=void 0===e?{}:e);return this.messageQueue.enqueue(this.provider,R.ASSET_VIEWED,{data:e}),this},U.prototype.calendarSubscribed=function(e){e=this.data.overlay(e=void 0===e?{}:e);return this.messageQueue.enqueue(this.provider,R.CALENDAR_SUBSCRIBED,{data:e}),this},U.prototype.calendarUnsubscribed=function(e){e=this.data.overlay(e=void 0===e?{}:e);return this.messageQueue.enqueue(this.provider,R.CALENDAR_UNSUBSCRIBED,{data:e}),this},U.prototype.calendarToggledOn=function(e){e=this.data.overlay(e=void 0===e?{}:e);return this.messageQueue.enqueue(this.provider,R.CALENDAR_TOGGLED_ON,{data:e}),this},U.prototype.calendarToggledOff=function(e){e=this.data.overlay(e=void 0===e?{}:e);return this.messageQueue.enqueue(this.provider,R.CALENDAR_TOGGLED_OFF,{data:e}),this},U.prototype.calendarTopicScheduled=function(e){e=this.data.overlay(e=void 0===e?{}:e);return this.messageQueue.enqueue(this.provider,R.CALENDAR_TOPIC_SCHEDULED,{data:e}),this},U.prototype.productUploaded=function(e){if(void 0===e&&(e={}),Array.isArray(e.products||e))return this.sendBatch(R.PRODUCT_UPLOADED,e);e=this.data.overlay(e);return this.messageQueue.enqueue(this.provider,R.PRODUCT_UPLOADED,{data:e}),this},U.prototype.sendBatch=function(e,t){var r=this,n=(t=void 0===t?{}:t).batch_id||G(),o=t.products,i=Q(t,["products"]),t=(Array.isArray(t)&&(o=t,i=null),o.map(function(e){return r.data.overlay(g(g(g({},i),e),{batch_id:n}))},[]));return this.messageQueue.enqueue(this.provider,R.BATCH_EVENTS,{event:e,list:t}),this},U;function U(e){var t=this;this.getAnonID=function(){return(t.anonId||{}).anonId},this.getSessionId=function(){return(t.sessionId||{}).sessionId},this.options=e||{},this.debugMode=this.options.debugMode||!1,this.initialDataSet=!1,this.data=new Rt({}),this.logger=i.getLogger(this.debugMode),this.listener=null,this.errorMonitor=!1,this.anonId=void 0===v?null:new J,this.messageQueue=new er,this.provider=new sr({eventDelays:null==e?void 0:e.eventDelays}),this.sessionId=void 0===v?null:new ur,void 0!==v&&(v.sstkAW=this)}}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).ConsentLibrary=t()}(this,function(){"use strict";e.loadScript=function(o){return new Promise(function(e,t){var r=document.createElement("script"),n=(r.src=o.src,r.type="text/javascript",r.async=o.async||!0,r.defer=o.defer||!0,(o.attributes||[]).forEach(function(e){return r.setAttribute(e.name,e.value)}),r.onload=function(){e()},document.getElementsByTagName("head")[0]);return n?(n.appendChild(r),r):t(new Error("Couldn't find target to inject script."))})};var n=e,t=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PO","PT","RO","SK","SI","ES","SE"],r={C0001:["A/B testing","Security & Fraud","Tag Managers"],C0002:["Analytics","Customer Success","Feature Flagging","Performance Monitoring","Raw Data","Surveys","Video"],C0003:["CRM","Heatmaps & Recordings","Livechat","Personalization","Storage Destinations"],C0004:["Advertising","Attribution","Deep linking","Email","Email Marketing","Enrichment","Marketing Automation"],C0005:["Referrals","SMS & Push Notifications"]},o="consentlibrary-geo-variant";function e(){}return i.prototype.load=function(){var r=this;return new Promise(function(e,t){if(!0===window.isConsentLibraryLoaded)return t(new Error("Onetrust already loaded"));window.dataLayer=window.dataLayer||[],r.loadGeoVariant(),r.createOptanonWrapper(e);e={src:"https://cdn.cookielaw.org/scripttemplates/otSDKStub.js",attributes:[{name:"data-domain-script",value:r.params.id},{name:"data-document-language",value:"true"}]};n.loadScript(e).catch(t)})},i.prototype.isGDPR=function(){var e=this.getProvider().getGeolocationData();return 0<=t.indexOf(e.country.toUpperCase())},i.prototype.isCCPA=function(){var e=this.getProvider().getGeolocationData();return"US"===e.country.toUpperCase()&&"CA"===e.state.toUpperCase()},i.prototype.getSegmentAcceptedCategories=function(){var e=this.getOneTrustAcceptedCategories(),t=[];return e.forEach(function(e){t.push.apply(t,r[e])}),t},i.prototype.getAcceptedCategories=function(){return{provider:this.getOneTrustAcceptedCategories(),segment:this.getSegmentAcceptedCategories()}},i.prototype.getProvider=function(){return this.provider},i.setGeoVariant=function(e,t){var r;null!=(r=window.localStorage)&&r.setItem(o,e+","+t)},i.clearGeoVariant=function(){var e;null!=(e=window.localStorage)&&e.removeItem(o)},i;function i(e){var t=this;this.loadGeoVariant=function(){var e=t.getGeoVariant();e&&(window.OneTrust={geolocationResponse:{countryCode:e.country,stateCode:e.state}})},this.createOptanonWrapper=function(e){window.OptanonWrapper=function(){t.provider=window.Optanon,window.OnetrustCachedGroups!==window.OptanonActiveGroups&&window.Optanon.OnConsentChanged(t.params.onConsentChanged),window.OnetrustCachedGroups=window.OptanonActiveGroups,window.isConsentLibraryLoaded=!0,!t.loaded&&t.params.onLoad&&t.params.onLoad(),t.loaded=!0,e()}},this.getOneTrustAcceptedCategories=function(){return window.OptanonActiveGroups?window.OptanonActiveGroups.split(",").filter(function(e){return e&&0<e.length}):[]},this.getGeoVariant=function(){var e,t=null==(t=window.localStorage)?void 0:t.getItem(o);return t?{country:null==(e=t.trim().split(",")[0])?void 0:e.trim(),state:null==(e=t.trim().split(",")[1])?void 0:e.trim()}:null},this.params=e,this.loaded=!1,this.params.onConsentChanged=this.params.onConsentChanged||function(){}}});